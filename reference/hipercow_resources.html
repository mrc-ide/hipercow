<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hipercow Resources — hipercow_resources • hipercow</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Hipercow Resources — hipercow_resources"><meta name="description" content="Specify what resources a task requires to run.  This creates a
validated list of resources that can be passed in as the
resources argument to task_create_expr or other task
creation functions."><meta property="og:description" content="Specify what resources a task requires to run.  This creates a
validated list of resources that can be passed in as the
resources argument to task_create_expr or other task
creation functions."><meta property="og:image" content="https://mrc-ide.github.io/hipercow/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hipercow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/hipercow.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>General</h6></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Packages and provisioning</a></li>
    <li><a class="dropdown-item" href="../articles/parallel.html">Parallel Tasks</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Details</h6></li>
    <li><a class="dropdown-item" href="../articles/details.html">Details</a></li>
    <li><a class="dropdown-item" href="../articles/environments.html">Environments</a></li>
    <li><a class="dropdown-item" href="../articles/stan.html">Using stan</a></li>
    <li><a class="dropdown-item" href="../articles/INLA.html">Using INLA on Windows</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Clusters</h6></li>
    <li><a class="dropdown-item" href="../articles/dide-cluster.html">The DIDE Cluster</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/workers.html">Workers</a></li>
    <li><a class="dropdown-item" href="../articles/administration.html">Administration</a></li>
    <li><a class="dropdown-item" href="../articles/migration.html">Migration from didehpc</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/hipercow/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Hipercow Resources</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/hipercow/blob/main/R/resource.R" class="external-link"><code>R/resource.R</code></a></small>
      <div class="d-none name"><code>hipercow_resources.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Specify what resources a task requires to run.  This creates a
validated list of resources that can be passed in as the
<code>resources</code> argument to <a href="task_create_expr.html">task_create_expr</a> or other task
creation functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hipercow_resources</span><span class="op">(</span></span>
<span>  cores <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  exclusive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max_runtime <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hold_until <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  memory_per_node <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  memory_per_process <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  requested_nodes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  priority <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  queue <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>The number of cores your task requires. This is 1 by
default. Setting to <code>Inf</code> will request any single node,
however many cores that node has.</p></dd>


<dt id="arg-exclusive">exclusive<a class="anchor" aria-label="anchor" href="#arg-exclusive"></a></dt>
<dd><p>Set this to <code>TRUE</code> to ensure no other tasks will be
concurrently run on the node while it runs your task. This is done
implicitly if <code>cores</code> is <code>Inf</code>. This might be useful for a single
core task that uses a very large amount of memory, or for multiple
tasks that for some reason cannot co-exist on the same node.</p></dd>


<dt id="arg-max-runtime">max_runtime<a class="anchor" aria-label="anchor" href="#arg-max-runtime"></a></dt>
<dd><p>Set this to specify a time limit for running your job.
Acceptable formats are either an integer number of minutes, or
strings specifying any combination of hours (h), days (d) and
minutes (m). Example valid values: <code>60</code>, <code>"1h30m</code>", <code>"5h"</code>,
or <code>"40d"</code>.</p></dd>


<dt id="arg-hold-until">hold_until<a class="anchor" aria-label="anchor" href="#arg-hold-until"></a></dt>
<dd><p>Specify your task should wait in the queue until
a certain time, or for a certain period. For the former, this can
be a <a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXt</a> (i.e., a date and time in the future), a <a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a> (midnight
on a day in the future), the special strings "tonight" (7pm),
"midnight", or "weekend" (midnight Saturday morning). To delay for
a period, you can specify an integer number of minutes, or
strings specifying any combination of hours (h), days (d) and
minutes (m). Example valid values: <code>60</code>, <code>"1h30m</code>", <code>"5h"</code>,
or <code>"3d"</code>.</p></dd>


<dt id="arg-memory-per-node">memory_per_node<a class="anchor" aria-label="anchor" href="#arg-memory-per-node"></a></dt>
<dd><p>Specify your task can only run on a node
with at least the specified memory. This is an integer assumed to
be gigabytes, or a string in gigabytes or terabytes written as
<code>"64G"</code> or <code>"1T"</code> for example.</p></dd>


<dt id="arg-memory-per-process">memory_per_process<a class="anchor" aria-label="anchor" href="#arg-memory-per-process"></a></dt>
<dd><p>If you can provide an estimate of how
much RAM your task requires, then the cluster can ensure the
total memory required by running multiple tasks on a node
does not exceed how much memory the node has. Specify this as
an integer number of gigabytes, or characters such as <code>"10G"</code></p></dd>


<dt id="arg-requested-nodes">requested_nodes<a class="anchor" aria-label="anchor" href="#arg-requested-nodes"></a></dt>
<dd><p>If you have been in touch with us or DIDE
IT, and you need to run your task on a selection of named compute
nodes, then specify this here as a vector of strings for the node names.</p></dd>


<dt id="arg-priority">priority<a class="anchor" aria-label="anchor" href="#arg-priority"></a></dt>
<dd><p>If the tasks you are launching are low priority, you can
allow other queuing tasks to jump over them, by setting the priority to
to <code>low</code>; otherwise, the default is <code>normal</code>. These are the only
acceptable values.</p></dd>


<dt id="arg-queue">queue<a class="anchor" aria-label="anchor" href="#arg-queue"></a></dt>
<dd><p>Specify a particular queue to submit your tasks to.
This is in development as we decide over time what
queues we best need for DIDE's common workflows. See the Details
for more information, and the queues available on each cluster.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If the function succeeds, it returns a <code>hipercow_resources</code> list
of parameters which is syntactically valid, although not yet
validated against a particular driver to see if the resources can be
satisfied. If the function fails, it will return information
about why the arguments could not be validated. Do not modify the
return value.</p>
    </div>
    <div class="section level2">
    <h2 id="windows-cluster-wpia-hn-">Windows cluster (<code>wpia-hn</code>)<a class="anchor" aria-label="anchor" href="#windows-cluster-wpia-hn-"></a></h2>

<ul><li><p>Cores at present must be between 1 and 32</p></li>
<li><p>Memory per node (or per task) can be 512Gb at most.</p></li>
<li><p>The available queues are <code>AllNodes</code> and <code>Testing</code> - the latter
has a maximum runtime of 30 minutes; jobs will be aborted if they
exceed this.</p></li>
<li><p>The node names are between <code>wpia-001</code> and <code>wpia-089</code>, excluding
41, 42, 49 and 50.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="linux-cluster-hermod-">Linux cluster (hermod)<a class="anchor" aria-label="anchor" href="#linux-cluster-hermod-"></a></h2>
    <p>Coming Soon.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># The default set of resources</span></span></span>
<span class="r-in"><span><span class="fu">hipercow_resources</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">hipercow resource control (hipercow_resources)</span> <span style="color: #00BBBB;">──────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • cores: 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • exclusive: FALSE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Unset: 'max_runtime', 'hold_until', 'memory_per_node', 'memory_per_process',</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'requested_nodes', 'priority', and 'queue'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A more complex case:</span></span></span>
<span class="r-in"><span><span class="fu">hipercow_resources</span><span class="op">(</span></span></span>
<span class="r-in"><span>  cores <span class="op">=</span> <span class="fl">32</span>,</span></span>
<span class="r-in"><span>  exclusive <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  priority <span class="op">=</span> <span class="st">"low"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">hipercow resource control (hipercow_resources)</span> <span style="color: #00BBBB;">──────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • cores: 32</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • exclusive: TRUE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • priority: low</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Unset: 'max_runtime', 'hold_until', 'memory_per_node', 'memory_per_process',</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'requested_nodes', and 'queue'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (remember that in order to change resources you would pass the</span></span></span>
<span class="r-in"><span><span class="co"># return value here into the "resources" argument of</span></span></span>
<span class="r-in"><span><span class="co"># task_create_expr() or similar)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Wes Hinsley, Paul Liétar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

